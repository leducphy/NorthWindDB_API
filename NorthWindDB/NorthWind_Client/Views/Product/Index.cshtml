@using Microsoft.AspNetCore.Mvc.TagHelpers
@using NorthWind_Client.Models
@{
    var products = ViewBag.Products as List<Response.ProductResponse>;
    var categories = ViewBag.Categories as List<Response.CategoryDTO>;
}
<div class="container">
    <h1>Products</h1>

    <div class="row">
        <div class="mb-3 col-md-6">
            <label for="categoryDropdown" class="form-label">Select Category:</label>
            <form asp-controller="Product" asp-action="GetByCategory" method="get">
                <select id="categoryDropdown" class="form-select" name="id" onchange="this.form.submit()">
                    <option value="0">All Categories</option>
                    @foreach (var item in categories)
                    {
                        <option value="@item.CategoryId">@item.CategoryName</option>
                    }
                </select>
            </form>
        </div>
        <div class="mt-3 col-md-6">
            <button  >
                <a asp-controller="Product" asp-action="Add" class="btn btn-primary" >add</a>
            </button>
        </div>
    </div>


    <table class="table">
        <thead>
        <tr>
            <th>Product Name</th>
            <th>Unit Price</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var product in products)
        {
        <tr>
            <td>@product.ProductId</td>
            <td>@product.ProductName</td>
            <td>@product.UnitPrice</td>
            <td>
                <a class="btn btn-primary" asp-controller="Product" asp-action="Edit" asp-route-id="@product.ProductId">Edit</a>
                <a class="btn btn-danger" asp-controller="Product" asp-action="Delete" asp-route-id="@product.ProductId">Delete</a>
                <a class="btn btn-info"asp-controller="Product" asp-action="Detail" asp-route-id="@product.ProductId">Details</a>
            </td>
        </tr>
        }
        </tbody>
    </table>

</div>

